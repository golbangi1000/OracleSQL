SHOW USER;
DROP TABLE GRADE_PT_RADE;
DROP TABLE TODAY;
DROP TABLE SALE;
DROP TABLE MEMBER CASCADE CONSTRAINTS PURGE;

CREATE TABLE GRADE_PT_RADE(
    MEM_GRADE VARCHAR2(20) NOT NULL CONSTRAINT GRADE_PT_RADE_MEM_GRADE_PK PRIMARY KEY,
    GRADE_PT_RATE NUMBER(3,2)
);


INSERT INTO GRADE_PT_RADE
VALUES('1',1.12);
INSERT INTO GRADE_PT_RADE
VALUES('2',1.55);
INSERT INTO GRADE_PT_RADE
VALUES('3',9.9);
INSERT INTO GRADE_PT_RADE
VALUES('4',2.5);
INSERT INTO GRADE_PT_RADE
VALUES('5',5.6);


CREATE TABLE TODAY(
    TODAY_CODE VARCHAR2(6) NOT NULL CONSTRAINT TODAY_TODAY_CODE_PK PRIMARY KEY,
    TODAY_SENS_VALUE NUMBER(3),
    TODAY_INTELL_VALUE NUMBER(3),
    TODAY_PHY_VALUE NUMBER(3)
);

INSERT INTO TODAY
VALUES('A',123,123,123);
INSERT INTO TODAY
VALUES('B',123,123,123);
INSERT INTO TODAY
VALUES('C',123,123,123);
INSERT INTO TODAY
VALUES('D',123,123,123);
INSERT INTO TODAY
VALUES('E',123,123,123);



CREATE TABLE NATION(
    NATION_CODE VARCHAR2(26) NOT NULL CONSTRAINT NATION_NATION_CODE_PK PRIMARY KEY,
    NATION_NAME VARCHAR2(50)
);
SELECT * FROM NATION;
INSERT INTO NATION
VALUES('AB','KOREA');
DELETE NATION
WHERE NATION_CODE = 'AA';
INSERT INTO NATION
VALUES('AA','JAPN');
INSERT INTO NATION
VALUES('AC','CHINA');
INSERT INTO NATION
VALUES('AD','USA');
INSERT INTO NATION
VALUES('AE','RUSSIA');

CREATE TABLE THEME(
    THEME_CODE VARCHAR2(6) NOT NULL CONSTRAINT THEME_THEME_CODE_PK PRIMARY KEY,
    THEME_NAME VARCHAR2(50)
);
INSERT INTO THEME
VALUES('BB','THEME1');
INSERT INTO THEME
VALUES('BC','THEME2');
INSERT INTO THEME
VALUES('BD','THEME3');
INSERT INTO THEME
VALUES('BE','THEME4');
INSERT INTO THEME
VALUES('BF','THEME5');


CREATE TABLE MANAGER(
    MANAGER_ID VARCHAR2(30) NOT NULL CONSTRAINT MANAGER_MANAGER_ID_PK PRIMARY KEY,
    MANAGER_PWD VARCHAR2(20),
    MANAGER_TEL VARCHAR2(20)
);

INSERT INTO MANAGER
VALUES('AAA','1234','01049194949');
INSERT INTO MANAGER
VALUES('BBB','1234','01049194949');
INSERT INTO MANAGER
VALUES('CCC','1234','01049194949');
INSERT INTO MANAGER
VALUES('DDD','1234','01049194949');
INSERT INTO MANAGER
VALUES('EEE','1234','01049194949');

CREATE TABLE WINE_TYPE(
    WINE_TYPE_CODE VARCHAR2(6) NOT NULL CONSTRAINT WINE_TYPE_WINE_TYPE_CODE_PK PRIMARY KEY,
    WINE_TYPE_NAME VARCHAR2(50)
);

INSERT INTO WINE_TYPE
VALUES('1','WINE1');
INSERT INTO WINE_TYPE
VALUES('12','WINE1');
INSERT INTO WINE_TYPE
VALUES('123','WINE1');
INSERT INTO WINE_TYPE
VALUES('1234','WINE1');
INSERT INTO WINE_TYPE
VALUES('12356','WINE1');



CREATE TABLE WINE(
    WINE_CODE VARCHAR2(26) NOT NULL CONSTRAINT WINE_WINE_CODE_PK PRIMARY KEY,
    WINE_NAME VARCHAR2(100) NOT NULL,
    WINE_URL BLOB,
    NATION_CODE VARCHAR2(6),
        CONSTRAINT WINE_NATION_CODE_FK FOREIGN KEY (NATION_CODE) REFERENCES NATION(NATION_CODE),
    WINE_TYPE_CODE VARCHAR2(6),
        CONSTRAINT WINE_WINE_TYPE_CODE_FK FOREIGN KEY (WINE_TYPE_CODE) REFERENCES WINE_TYPE(WINE_TYPE_CODE),
    WINE_SUGAR_CODE NUMBER(2),
    WINE_PRICE NUMBER(15) NOT NULL,
    WINE_VINTAGE DATE,
    THEME_CODE VARCHAR2(6),
        CONSTRAINT WINE_THEME_CODE_FK FOREIGN KEY (THEME_CODE) REFERENCES THEME(THEME_CODE),
    TODAY_CODE VARCHAR2(6),
        CONSTRAINT WINE_TODAY_CODE_FK FOREIGN KEY (TODAY_CODE) REFERENCES TODAY(TODAY_CODE)
);

INSERT INTO WINE
VALUES('AAA','ASDF',NULL,'AB','1',12,1234,'12/12/12','BB','A');
INSERT INTO WINE
VALUES('BBB','ASDF',NULL,'AC','12',12,1234,'12/12/12','BC','A');
INSERT INTO WINE
VALUES('CCC','ASDF',NULL,'AD','123',12,1234,'12/12/12','BD','C');
INSERT INTO WINE
VALUES('DDD','ASDF',NULL,'AE','1234',12,1234,'12/12/12','BE','D');
INSERT INTO WINE
VALUES('EEE','ASDF',NULL,'AA','12356',12,1234,'12/12/12','BF','A');


CREATE TABLE MEMBER(
    MEM_ID VARCHAR2(6) NOT NULL CONSTRAINT MEMBER_MEM_ID_PK PRIMARY KEY,
    MEM_GRADE VARCHAR2(20),
        CONSTRAINT MEMBER_MEM_GRADE_FK FOREIGN KEY (MEM_GRADE) REFERENCES GRADE_PT_RADE(MEM_GRADE),
    MEM_PW VARCHAR2(20) NOT NULL,
    MEM_BIRTH DATE DEFAULT SYSDATE NOT NULL,
    MEM_TEL VARCHAR2(10),
    MEM_PT VARCHAR2(10) DEFAULT 0 NOT NULL
);
SELECT * FROM GRADE_PT_RADE;
INSERT INTO MEMBER
VALUES('A','1','1234','12/12/12','1234','1245');
INSERT INTO MEMBER
VALUES('B','2','1234','12/12/12','1234','1245');

INSERT INTO MEMBER
VALUES('C','3','1234','12/12/12','1234','1245');

INSERT INTO MEMBER
VALUES('D','1','1234','12/12/12','1234','1245');

INSERT INTO MEMBER
VALUES('E','2','1234','12/12/12','1234','1245');





CREATE TABLE SALE (
    SALE_DATE DATE NOT NULL CONSTRAINT SALE_SALE_DATE_PK PRIMARY KEY,
    WINE_CODE VARCHAR2(6) NOT NULL,
        CONSTRAINT SALE_WINE_CODE_FK FOREIGN KEY (WINE_CODE) REFERENCES WINE(WINE_CODE),
    MEM_ID VARCHAR2(30) NOT NULL,
        CONSTRAINT SALE_MEM_ID_FK FOREIGN KEY (MEM_ID) REFERENCES MEMBER(MEM_ID),
    SALE_AMOUNT VARCHAR2(5) DEFAULT 0 NOT NULL,
    SALE_PRICE VARCHAR2(6) DEFAULT 0 NOT NULL,
    SALE_TOT_PRICE VARCHAR2(15) DEFAULT 0 NOT NULL
);
SELECT * FROM WINE;
SELECT * FROM MEMBER;
INSERT INTO SALE
VALUES('12/12/12','AAA','A','123','1235','1255');
INSERT INTO SALE
VALUES('12/01/12','BBB','A','123','1235','1255');
INSERT INTO SALE
VALUES('12/12/13','AAA','A','123','1235','1255');
INSERT INTO SALE
VALUES('12/12/14','CCC','A','123','1235','1255');
INSERT INTO SALE
VALUES('12/12/15','AAA','D','123','1235','1255');


CREATE TABLE STOCK_MANAGEMENT (
    STOCK_CODE VARCHAR2(6) NOT NULL CONSTRAINT STOCK_MANAGEMENT_STOCK_CODE_PK PRIMARY KEY,
    WINE_CODE VARCHAR2(6),
        CONSTRAINT STOCK_MANAGEMENT_WINE_CODE_FK FOREIGN KEY (WINE_CODE) REFERENCES WINE(WINE_CODE),
    MANAGER_ID VARCHAR2(30),
        CONSTRAINT STOCK_MANAGEMENT_MANAGER_ID_FK FOREIGN KEY (MANAGER_ID) REFERENCES MANAGER(MANAGER_ID),
    WARE_DATE DATE DEFAULT SYSDATE NOT NULL,
    STOCK_AMOUNT NUMBER(5) DEFAULT 0 NOT NULL
);
SELECT * FROM WINE;
SELECT * FROM MANAGER;
INSERT INTO STOCK_MANAGEMENT
VALUES('AAAA','AAA','CCC','12/12/12',123);
INSERT INTO STOCK_MANAGEMENT
VALUES('BBBB','BBB','AAA','12/12/12',1234);
INSERT INTO STOCK_MANAGEMENT
VALUES('CCCC','EEE','AAA','12/12/12',1234);
INSERT INTO STOCK_MANAGEMENT
VALUES('DDDD','AAA','BBB','12/12/12',1234);
INSERT INTO STOCK_MANAGEMENT
VALUES('EEEE','DDD','AAA','12/12/12',1234);






